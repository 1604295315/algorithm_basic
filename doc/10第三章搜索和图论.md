# 10 第三章 搜索和图论 1
最短路径
最小生成树
普通的深搜宽搜
树与图的存储
数和图的dfs bfs 
拓扑排序

---

||数据结构|空间||
|---|---|---|---|
|DFS|Stack|O(n)|不具有最短性(图)|
|BFS|QUEUE|O($2^n$)| 最短路(权重为1时)|

## DFS 深度优先搜索

* 全排列
 回溯 恢复现场
  :smile:
* n八皇后问题
栈 STACK
回溯 剪枝

搜索树

#### 题目 843. N-皇后问题 (车) 横 竖 斜
<!-- 行列式求系数 不同行不同列的乘机 -->
| 难度：|**中等**       |
| ----------|----------|
| 时/空限制：|1s / 64MB |
| 来源：|模板题,AcWing  |
| 算法标签 |    dfs 剪枝|

n−皇后问题是指将 n 个皇后放在 n×n 的国际象棋棋盘上, 使得皇后不能相互攻击到, 即任意两个皇后都不能处于同一行、同一列或同一斜线上. 
![1_597ec77c49-8-queens.png](https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png)
#### 输入格式

共一行, 包含整数 n. 

#### 输出格式

每个解决方案占 n  行, 每行输出一个长度为 n 的字符串，用来表示完整的棋盘状态。其中 `.` 表示某一个位置的方格状态为空，`Q` 表示某一个位置的方格上摆着皇后。每个方案输出完成后, 输出一个空行. 

**注意：行末不能有多余空格。**

输出方案的顺序任意，只要不重复且没有遗漏即可。

#### 数据范围

1≤n≤9

#### 输入样例：

```
4
```

#### 输出样例：

```
.Q..
...Q
Q...
..Q.

..Q.
Q...
...Q
.Q..
```


## BFS 宽度优先搜索
队列 QUEUE
* 844 走迷宫
* 845 八数码 见习题课

---

## 树与图的存储

树是一种特殊的图(无环连通图)
---

### 图
邻接表 邻接矩阵
#### 有向图 

1. 邻接矩阵 

二维数组 g[a][b] = 1 : a->b
适合稠密图

2. 邻接表
那个点,每个点上都有一个单链表

![graph eg1](graph%20eg1.png)
开四个单链表

如下表所示:
|点|边|
|:-:|:-:|
|h[1]| -> [3] -> [4] -> [ ]|
|h[2]| -> [1] -> [ ]|
|h[3]| -> [4] -> [ ]|
|h[4]| -> [ ]|

|点|边|
|:-:|:-:|
|1|1->3; 1->4|
|2|2->1|
|3|3->4|
|4||

拉链表的哈希法

eg: [ACwing 846. 树的重心](https://www.acwing.com/activity/content/problem/content/909/)

给定一颗树，树中包含 n 个结点（编号 1∼n ）和 n−1 条无向边。

请你找到树的重心，并输出将重心删除后，剩余各个连通块中点数的最大值。

重心定义：重心是指树中的一个结点，如果将这个点删除后，剩余各个连通块中点数的最大值最小，那么这个节点被称为树的重心。

#### 输入格式

第一行包含整数 n，表示树的结点数。

接下来 n−1 行，每行包含两个整数 a 和 b，表示点 a 和点 b 之间存在一条边。

#### 输出格式

输出一个整数 m，表示将重心删除后，剩余各个连通块中点数的最大值。

#### 数据范围

1 ≤ n ≤ $10^5$
$$
a=a^b+c^d\mod a
$$

#### 输入样例

```
9
1 2
1 7
1 4
2 8
2 5
4 3
3 9
4 6
```

#### 输出样例：

```
4
```
#### 无向图

## 树与图的深度优先遍历
## 树与图的宽度优先遍历

eg [AcWing 847. 图中点的层次](https://www.acwing.com/problem/content/849/)

给定一个 n 个点 m 条边的有向图，图中可能存在重边和自环。

所有边的长度都是 1，点的编号为 1∼n。

请你求出 1 号点到 n 号点的最短距离，如果从 1 号点无法走到 n 号点，输出 −1。

#### 输入格式

第一行包含两个整数 n 和 m。

接下来 m 行，每行包含两个整数 a 和 b，表示存在一条从 a 走到 b 的长度为 1 的边。

#### 输出格式

输出一个整数，表示 1 号点到 n 号点的最短距离。

#### 数据范围

1≤n,m≤ $10^5$

#### 输入样例：

```
4 5
1 2
2 3
3 4
1 3
1 4
```

输出样例：
`1`

eg2 [847. 图中点的层次](https://www.acwing.com/problem/content/849/)

给定一个 n 个点 m 条边的有向图，图中可能存在重边和自环。

所有边的长度都是 1，点的编号为 1∼n。

请你求出 1 号点到 n 号点的最短距离，如果从 11 号点无法走到 n 号点，输出 −1。

#### 输入格式

第一行包含两个整数 n 和 m。

接下来 m 行，每行包含两个整数 a 和 b，表示存在一条从 a 走到 b 的长度为 1 的边。

#### 输出格式

输出一个整数，表示 1 号点到 n 号点的最短距离。

#### 数据范围

1 ≤ n,m ≤ $10^5$

#### 输入样例：

```
4 5
1 2
2 3
3 4
1 3
1 4
```

#### 输出样例：

```
1
```

### 宽搜的应用 (求拓扑序)

## 拓扑排序
### 相关概念 定义
适用于: 有向 无环 图 (工序 不步骤)
不适用于 所有有向图
起点在终点的前面
所有边从前指向后
入度 出度
Floyd
入度为0, 起点
eg3 [有向图的拓扑序列](https://www.acwing.com/problem/content/850/)

给定一个 n 个点 m 条边的有向图，点的编号是 1 到 n，图中可能存在重边和自环。

请输出任意一个该有向图的拓扑序列，如果拓扑序列不存在，则输出 −1−1。

若一个由图中所有点构成的序列 A 满足：对于图中的每条边 (x,y)，x 在 A 中都出现在 y 之前，则称 A 是该图的一个拓扑序列。

#### 输入格式

第一行包含两个整数 n 和 m。

接下来 m 行，每行包含两个整数 x 和 y，表示存在一条从点 x 到点 y 的有向边 (x,y)。

#### 输出格式

共一行，如果存在拓扑序列，则输出任意一个合法的拓扑序列即可。

否则输出 −1−1。

#### 数据范围

1 ≤ n, m ≤ $10^5$

#### 输入样例：

```
3 3
1 2
2 3
1 3
```

#### 输出样例：

```
1 2 3
```

---
 抽屉鸽笼原理 一个有向无环图一定至少存在一个入度为0的点
queue <- 所有入度为0的点

while (queue 不空) {
  t <- 队头
  枚举t的所有出边 t -> j
  删掉 t -> j, d[j] --;
  if (d[j] == 0)
    queue <- j;
}

---

<!-- 大顶堆小顶堆 堆排序 -->




最短路
最小生成树